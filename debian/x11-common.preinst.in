#!/bin/sh
# Debian x11-common package pre-installation script
# Copyright 1998--2001, 2003 Branden Robinson.
# Licensed under the GNU General Public License, version 2.  See the file
# /usr/share/common-licenses/GPL or <http://www.gnu.org/copyleft/gpl.txt>.
# Acknowlegements to Stephen Early, Mark Eichin, and Manoj Srivastava.

set -e

. /usr/share/debconf/confmodule

THIS_PACKAGE=x11-common
THIS_SCRIPT=preinst
CONFIG_DIR=/etc/X11

#INCLUDE_SHELL_LIB#

if [ "$1" = "install" ] || [ "$1" = "upgrade" ]; then

  if dpkg --compare-versions "$2" lt-nl "1:7.4~2ubuntu1"; then
    remove_conffile_lookup xinit "/etc/X11/Xsession.d/20xorg-common_process-args"
    remove_conffile_lookup xinit "/etc/X11/Xsession.d/30xorg-common_xresources"
    remove_conffile_lookup xinit "/etc/X11/Xsession.d/50xorg-common_determine-startup"
    remove_conffile_lookup xinit "/etc/X11/Xsession.d/90xorg-common_ssh-agent"
    remove_conffile_lookup xinit "/etc/X11/Xsession.d/99xorg-common_start"
  fi
  if dpkg --compare-versions "$2" lt-nl "1:7.4~5ubuntu16"; then
    remove_conffile_lookup x11-common "/etc/X11/Xsession.d/60x11-localhost"
  fi
fi

#DEBHELPER#

exit 0

# vim:set ai et sts=2 sw=2 tw=0:
